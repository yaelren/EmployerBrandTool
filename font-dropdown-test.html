<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Font Dropdown Integration Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background: #121212;
            color: #e5e5e5;
        }
        .test-section {
            margin: 20px 0;
            padding: 20px;
            border: 1px solid #3a3a3a;
            border-radius: 8px;
            background: #1a1a1a;
        }
        select {
            background: #1a1a1a;
            border: 1px solid #3a3a3a;
            border-radius: 4px;
            padding: 8px 12px;
            color: #e5e5e5;
            font-size: 14px;
            width: 200px;
        }
        option {
            background: #1a1a1a;
            color: #e5e5e5;
        }
        option:disabled {
            color: #666;
            font-style: italic;
        }
        .test-text {
            font-size: 24px;
            margin: 10px 0;
            padding: 10px;
            background: #2a2a2a;
            border-radius: 4px;
        }
    </style>
</head>
<body>
    <h1>Font Dropdown Integration Test</h1>
    
    <div class="test-section">
        <h2>Main Text Font Dropdown</h2>
        <label for="mainFontSelect">Font:</label>
        <select id="mainFontSelect">
            <!-- Options will be populated by JavaScript -->
        </select>
        <div class="test-text" id="mainTextPreview">
            The quick brown fox jumps over the lazy dog
        </div>
    </div>

    <div class="test-section">
        <h2>Spot Text Font Dropdown</h2>
        <label for="spotFontSelect">Font:</label>
        <select id="spotFontSelect">
            <!-- Options will be populated by JavaScript -->
        </select>
        <div class="test-text" id="spotTextPreview">
            Spot text preview
        </div>
    </div>

    <!-- Load the font management scripts -->
    <script src="js/text/FontManager.js"></script>
    <script src="js/text/FontUploadComponent.js"></script>
    <script src="js/text/TextComponent.js"></script>

    <script>
        // Initialize FontManager
        if (typeof FontManager !== 'undefined') {
            window.fontManager = new FontManager();
        }

        // Test main text dropdown
        function testMainTextDropdown() {
            const select = document.getElementById('mainFontSelect');
            const preview = document.getElementById('mainTextPreview');
            
            if (typeof TextComponent !== 'undefined') {
                const fonts = TextComponent.getAvailableFonts();
                
                fonts.forEach(font => {
                    const option = document.createElement('option');
                    option.value = font.value;
                    option.textContent = font.name;
                    
                    if (font.isCustom) {
                        option.textContent += ' (Custom)';
                        option.style.fontStyle = 'italic';
                    }
                    
                    select.appendChild(option);
                });

                // Add separator and upload option
                const separator = document.createElement('option');
                separator.disabled = true;
                separator.textContent = 'â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€';
                select.appendChild(separator);

                const uploadOption = document.createElement('option');
                uploadOption.value = '__upload_font__';
                uploadOption.textContent = 'ðŸ“ Upload custom font...';
                uploadOption.style.fontStyle = 'italic';
                uploadOption.style.color = '#999';
                select.appendChild(uploadOption);

                // Set initial value
                select.value = '"Wix Madefor Display", Arial, sans-serif';
                preview.style.fontFamily = select.value;

                // Handle changes
                select.addEventListener('change', () => {
                    const selectedValue = select.value;
                    
                    if (selectedValue === '__upload_font__') {
                        alert('Font upload modal would open here!');
                        // Reset to previous selection
                        select.value = '"Wix Madefor Display", Arial, sans-serif';
                        return;
                    }
                    
                    preview.style.fontFamily = selectedValue;
                });
            }
        }

        // Test spot text dropdown
        function testSpotTextDropdown() {
            const select = document.getElementById('spotFontSelect');
            const preview = document.getElementById('spotTextPreview');
            
            if (typeof TextComponent !== 'undefined') {
                const fonts = TextComponent.getAvailableFonts();
                
                fonts.forEach(font => {
                    const option = document.createElement('option');
                    option.value = font.value;
                    option.textContent = font.name;
                    
                    if (font.isCustom) {
                        option.textContent += ' (Custom)';
                        option.style.fontStyle = 'italic';
                    }
                    
                    select.appendChild(option);
                });

                // Add separator and upload option
                const separator = document.createElement('option');
                separator.disabled = true;
                separator.textContent = 'â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€';
                select.appendChild(separator);

                const uploadOption = document.createElement('option');
                uploadOption.value = '__upload_font__';
                uploadOption.textContent = 'ðŸ“ Upload custom font...';
                uploadOption.style.fontStyle = 'italic';
                uploadOption.style.color = '#999';
                select.appendChild(uploadOption);

                // Set initial value
                select.value = '"Wix Madefor Display", Arial, sans-serif';
                preview.style.fontFamily = select.value;

                // Handle changes
                select.addEventListener('change', () => {
                    const selectedValue = select.value;
                    
                    if (selectedValue === '__upload_font__') {
                        alert('Font upload modal would open here!');
                        // Reset to previous selection
                        select.value = '"Wix Madefor Display", Arial, sans-serif';
                        return;
                    }
                    
                    preview.style.fontFamily = selectedValue;
                });
            }
        }

        // Run tests when page loads
        document.addEventListener('DOMContentLoaded', () => {
            testMainTextDropdown();
            testSpotTextDropdown();
        });
    </script>
</body>
</html>
